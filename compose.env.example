# CMB Cluster Environment Configuration
# Copy this file to .env in the root directory and fill in your values.
#
# PRODUCTION SECURITY WARNING:
# - Generate secure random secrets for production deployment
# - Never use development defaults in production
# - Store secrets securely and rotate regularly

# === PROJECT CONFIGURATION ===
PROJECT_ID=your-gcp-project-id
CLUSTER_NAME=cmbcluster
DOMAIN=yourdomain.com
REGION=us-central1
ZONE=us-central1-a
TAG=latest

# === BACKEND SECURITY CONFIGURATION ===
# JWT secret key for token signing (CRITICAL - generate with: openssl rand -hex 32)
SECRET_KEY=dev-super-secret-key-that-is-not-used-in-prod

# File encryption key for user environment files (generate with: openssl rand -base64 32)
FILE_ENCRYPTION_KEY=your-file-encryption-key-here

# Google OAuth Configuration (required for authentication)
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret

# === FRONTEND SECURITY CONFIGURATION ===
# NextAuth.js secret for session management (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=your-nextauth-secret-key-here-minimum-32-chars
NEXTAUTH_URL=https://yourdomain.com

# API URL configuration
NEXT_PUBLIC_API_URL=https://api.yourdomain.com

# === PRODUCTION SECURITY SETTINGS ===
# Set to false for production deployment
DEV_MODE=false
DEBUG=false

# Security features (enable for production)
TLS_ENABLED=true
RATE_LIMIT_ENABLED=true
ENABLE_SECURITY_HEADERS=true
CSP_ENABLED=true

# === APPLICATION SETTINGS ===
# Token expiration (hours) - shorter is more secure
TOKEN_EXPIRE_HOURS=8

# User environment limits
MAX_INACTIVE_HOURS=2
MAX_USER_PODS=1

# Auto-shutdown settings for free tier
FREE_TIER_MAX_UPTIME_MINUTES=60
AUTO_SHUTDOWN_CHECK_INTERVAL_MINUTES=5

# === OPTIONAL REDIS CONFIGURATION ===
# Uncomment for distributed rate limiting in cluster deployments
# REDIS_URL=redis://redis-service:6379
# REDIS_ENABLED=true

# === DEVELOPMENT OVERRIDES ===
# For local development, you can override production settings:
# DEV_MODE=true
# DEBUG=true
# TLS_ENABLED=false
# TOKEN_EXPIRE_HOURS=24

# === FRONTEND ADDITIONAL CONFIG ===
NEXT_PUBLIC_APP_TITLE=CMBAgent Cloud
NEXT_PUBLIC_APP_TAGLINE=Your gateway to autonomous research

# === PRODUCTION DEPLOYMENT CHECKLIST ===
# Before deploying to production:
# 1. Generate secure SECRET_KEY: openssl rand -hex 32
# 2. Generate secure NEXTAUTH_SECRET: openssl rand -base64 32
# 3. Generate secure FILE_ENCRYPTION_KEY: openssl rand -base64 32
# 4. Configure Google OAuth credentials in Google Cloud Console
# 5. Update PROJECT_ID with your actual GCP project
# 6. Update DOMAIN with your actual domain name
# 7. Set DEV_MODE=false and DEBUG=false
# 8. Ensure TLS_ENABLED=true and all security features enabled
# 9. Test authentication flow in staging environment
# 10. Run security validation: ./scripts/validate-security.sh